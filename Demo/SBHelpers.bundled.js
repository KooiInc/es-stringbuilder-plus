// node_modules/jqlmodule/Bundle/jql.min.js
var kt = "url('data:image/svg+xml\\3butf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22iso-8859-1%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20id%3D%22Layer_1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20128%20128%22%20style%3D%22enable-background%3Anew%200%200%20128%20128%3B%22%20xml%3Aspace%3D%22preserve%22%3E%3Crect%20x%3D%22-368%22%20y%3D%226%22%20style%3D%22display%3Anone%3Bfill%3A%23E0E0E0%3B%22%20width%3D%22866%22%20height%3D%221018%22%2F%3E%3Ccircle%20style%3D%22fill%3A%23FFFFFF%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Ccircle%20style%3D%22fill%3A%238CCFB9%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2239%22%2F%3E%3Ccircle%20style%3D%22fill%3Anone%3Bstroke%3A%23444B54%3Bstroke-width%3A6%3Bstroke-miterlimit%3A10%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Cpolyline%20style%3D%22fill%3Anone%3Bstroke%3A%23FFFFFF%3Bstroke-width%3A6%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%3B%22%20points%3D%2242%2C69%2055.55%2C81%20%20%2086%2C46%20%22%2F%3E%3C%2Fsvg%3E')";
var tt = Bt();
var yt = Qt();
var _ = Ot();
var U = Jt();
function Ot() {
  return { html: "accept,action,align,alt,autocapitalize,autocomplete,autopictureinpicture,autoplay,background,bgcolor,border,capture,cellpadding,cellspacing,checked,cite,class,clear,contenteditable,color,cols,colspan,controls,controlslist,coords,crossorigin,datetime,decoding,default,dir,disabled,disablepictureinpicture,disableremoteplayback,download,draggable,enctype,enterkeyhint,face,for,headers,height,hidden,high,href,hreflang,id,inputmode,integrity,ismap,kind,label,lang,list,loading,loop,low,max,maxlength,media,method,min,minlength,multiple,muted,name,nonce,noshade,novalidate,nowrap,open,optimum,pattern,placeholder,playsinline,poster,preload,pubdate,radiogroup,readonly,rel,required,rev,reversed,role,rows,rowspan,spellcheck,scope,selected,shape,size,sizes,span,srclang,start,src,srcset,step,style,summary,tabindex,target,title,translate,type,usemap,valign,value,width,xmlns,slot".split(","), svg: "accent-height,accumulate,additive,alignment-baseline,ascent,attributename,attributetype,azimuth,basefrequency,baseline-shift,begin,bias,by,class,clip,clippathunits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,cx,cy,d,dx,dy,diffuseconstant,direction,display,divisor,dur,edgemode,elevation,end,fill,fill-opacity,fill-rule,filter,filterunits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,fx,fy,g1,g2,glyph-name,glyphref,gradientunits,gradienttransform,height,href,id,image-rendering,in,in2,k,k1,k2,k3,k4,kerning,keypoints,keysplines,keytimes,lang,lengthadjust,letter-spacing,kernelmatrix,kernelunitlength,lighting-color,local,marker-end,marker-mid,marker-start,markerheight,markerunits,markerwidth,maskcontentunits,maskunits,max,mask,media,method,mode,min,name,numoctaves,offset,operator,opacity,order,orient,orientation,origin,overflow,paint-order,path,pathlength,patterncontentunits,patterntransform,patternunits,points,preservealpha,preserveaspectratio,primitiveunits,r,rx,ry,radius,refx,refy,repeatcount,repeatdur,restart,result,rotate,scale,seed,shape-rendering,specularconstant,specularexponent,spreadmethod,startoffset,stddeviation,stitchtiles,stop-color,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke,stroke-width,style,surfacescale,systemlanguage,tabindex,targetx,targety,transform,text-anchor,text-decoration,text-rendering,textlength,type,u1,u2,unicode,values,viewbox,visibility,version,vert-adv-y,vert-origin-x,vert-origin-y,width,word-spacing,wrap,writing-mode,xchannelselector,ychannelselector,x,x1,x2,xmlns,y,y1,y2,z,zoomandpan".split(",") };
}
function Jt() {
  return { a: true, area: true, audio: false, br: true, base: true, body: true, button: true, canvas: true, dl: true, data: true, datalist: true, div: true, em: true, embed: false, fieldset: true, font: true, footer: true, form: false, hr: true, head: true, header: true, output: true, iframe: false, frameset: false, img: true, input: true, li: true, label: true, legend: true, link: true, map: true, mark: true, menu: true, media: true, meta: true, nav: true, meter: true, ol: true, object: false, optgroup: true, option: true, p: true, param: true, picture: true, pre: true, progress: false, quote: true, script: false, select: true, source: true, span: true, style: true, caption: true, td: true, col: true, table: true, tr: true, template: false, textarea: true, time: true, title: true, track: true, details: true, ul: true, video: true, del: true, ins: true, slot: true, blockquote: true, svg: true, dialog: true, summary: true, main: true, address: true, colgroup: true, tbody: true, tfoot: true, thead: true, th: true, dd: true, dt: true, figcaption: true, figure: true, i: true, b: true, code: true, h1: true, h2: true, h3: true, h4: true, abbr: true, bdo: true, dfn: true, kbd: true, q: true, rb: true, rp: true, rt: true, ruby: true, s: true, strike: true, samp: true, small: true, strong: true, sup: true, sub: true, u: true, var: true, wbr: true, nobr: true, tt: true, noscript: true };
}
function Bt() {
  return ["#logBox{min-width:0px;max-width:0px;min-height:0px;max-height:0px;,width:0;height:0;z-index:-1;border:none;padding:0px;overflow:hidden;transition:all 0.3s ease;margin-top:-100px;}", "#logBox.visible{background-color:rgb(255, 255, 224);z-index:1;position:static;border:1px dotted rgb(153, 153, 153);max-width:50vw;min-width:30vw;min-height:10vh;max-height:90vh;overflow:auto;width:50vw;height:20vh;margin:1rem 0px;padding:0px 8px 19px;resize:both;}", "#logBox.visible .legend{position:absolute;}", "#logBox .legend{text-align:center;margin-top:-1em;width:inherit;max-width:inherit;}", "#logBox .legend div{text-align:center;display:inline-block;max-width:inherit;height:1.2rem;background-color:rgb(119, 119, 119);padding:2px 10px;color:rgb(255, 255, 255);box-shadow:rgb(119 119 119) 2px 1px 10px;border-radius:4px;}", "#logBox .legend div:before{content:'JQL Logging (chronological)';}", "#logBox .legend.reversed div:before{content:'JQL Logging (reversed)';}", "#logBox #jql_logger{marginTop:0.7rem;lineHeight:1.4em;font-family:consolas,monospace;whiteSpace:pre-wrap;maxWidth:inherit;padding-left:100px;}", "#logBox #jql_logger div.entry{text-indent:-100px;whiteSpace:normal;}"];
}
function Qt() {
  return [".popupContainer{position:fixed;inset:-5000px;opacity:0;height:0;width:0;background:rgba(0,0,0,0.1);transition:opacity 0.6s ease-in-out 0s;}", ".popupContainer.popup-active{opacity:1;inset:0;height:auto;width:auto;}", ".popupContainer .content{box-shadow:rgba(0,0,0,0.5) 2px 2px 8px;border-radius:3px;min-width:125px;max-width:40vw;max-height:40vh;padding:8px;overflow:auto;background:#FFF;z-index:inherit;opacity:1;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);}", ".popupContainer .content .popup-warn{position:relative;padding:3px 8px 0 8px;color:red;margin:6px -8px -4px -8px;text-align:center;display:none;}", ".popupContainer .content.popup-warn-active .popup-warn{display:block;border-top:1px dashed rgb(0,0,0);}", `.closeHandleIcon{z-index:1;position:absolute;opacity:0;cursor:pointer;width:24px;height:24px;background:${kt} no-repeat;}`, ".closeHandleIcon.popup-active{opacity:1;}", "@media screen and (width < 1200px){.popupContainer .content{max-width:75vw;}}", "@media screen and (width < 640px){.popupContainer .content{max-width:90vw;max-height:60vw;}}"];
}
var et = false;
var Pt = { on: () => et = true, off: () => et = false };
var j = { tagsRaw: U, allowUnknownHtmlTags: Pt, isAllowed(t) {
  if (et)
    return true;
  let e = t?.nodeName.toLowerCase() || "none";
  return e === "#text" || !!U[e];
}, allowTag: (t) => U[t.toLowerCase()] = true, prohibitTag: (t) => U[tag.toLowerCase()] = false };
var ot = false;
var V = false;
var J = true;
var it = false;
var Wt = true;
var bt;
var O = () => x("#logBox");
var vt = "#jql_logger";
var zt = (t) => {
  tt?.forEach((e) => t(e));
};
var qt = () => {
  tt && zt(bt);
  let t = Wt ? "div" : "pre", e = `<div id="logBox"><div class="legend"><div></div></div><${t} id="jql_logger"></${t}></div>`;
  return st(R(e), void 0, A.AfterBegin), x.node(vt);
};
var xt = (t) => c(t, String) && Object.assign(document.createElement("textarea"), { innerHTML: t }).textContent || t;
var F = (...t) => {
  let e = t[0] === "fromStatic";
  if (t = e ? t.slice(1) : t, e && !V)
    return t.forEach((n) => console.info(`${B()} \u2714 ${xt(n)}`));
  if (!V)
    return;
  !J && !x.node("#logBox") && (bt = x.createStyle("JQLLogCSS"), qt());
  let r = (n) => `${c(n, Object) ? JSON.stringify(n, null, 2) : n}
`;
  t.forEach((n) => J ? console.info(`${B()} \u2714 ${xt(n)}`) : x.node("#jql_logger").insertAdjacentHTML(it ? "afterbegin" : "beforeend", `<div class="entry">${B()} ${r(n.replace(/\n/g, "<br>"))}</div>`));
};
var rt = { on() {
  V = true, F("Logging activated");
}, off() {
  V = false, console.log("Logging deactivated");
} };
var nt = { on() {
  ot = true;
}, off() {
  ot = false;
} };
var Q = (...t) => ot && F(...t);
var $ = { get isConsole() {
  return J === true;
}, isOn: () => V, isVisible: () => x("#jql_logger").is("visible"), on: () => (rt.on(), nt.on(), J || O()?.addClass("visible"), F("Debug logging started. Every call to [jql instance] is logged"), $), off: () => (O().isEmpty || (nt.off(), F("Debug logging stopped"), O()?.removeClass("visible")), rt.off(), $), toConsole: { on: () => (J = true, F("Started logging to console"), $), off() {
  return F("Stopped logging to console (except error messages)"), J = false, $;
} }, remove: () => (rt.off(), nt.off(), O()?.remove(), console.clear(), console.log(`${B()} logging completely disabled and all entries removed`), $), log: (...t) => (F(...t), $), hide: () => (O()?.removeClass("visible"), $), show: () => (O()?.addClass("visible"), $), reversed: { on: () => (it = true, F("Reverse logging set: now logging bottom to top (latest first)"), x("#logBox .legend").addClass("reversed"), $), off: () => (it = false, x("#logBox .legend").removeClass("reversed"), F("Reverse logging reset: now logging chronological (latest last)"), $) }, clear: () => (x(vt).text(""), console.clear(), F("Logging cleared"), $) };
var c = Lt;
function Lt(t, ...e) {
  let r = ["NaN", "null", "undefined"], n = (h) => typeof h == "symbol" ? Symbol : h;
  return e.length > 1 ? d(t, ...e) : o();
  function o() {
    let h = n(t), b = e.length > 0;
    return e = b && e.shift(), b && i(e) ? `${h}` == `${e}` : t === false ? e === Boolean ? true : "Boolean" : w();
    function w() {
      let C = t === 0 ? Number : t === "" ? String : h ? Object.getPrototypeOf(t)?.constructor : { name: `${h}` };
      return e ? e === C || e === Object.getPrototypeOf(C) || `${e}` === C?.name : C?.name;
    }
  }
  function i(h) {
    for (let b of r)
      if (b === `${h}`)
        return true;
    return false;
  }
  function d(h, ...b) {
    for (let f of b)
      if (Lt(h, f))
        return true;
    return false;
  }
}
var _t = [...Array(26)].map((t, e) => String.fromCharCode(e + 65)).concat([...Array(26)].map((t, e) => String.fromCharCode(e + 97))).concat([...Array(10)].map((t, e) => `${e}`));
var Y = (t, e = 2) => `${t}`.padStart(e, "0");
var Ut = (t, e = 0) => ([t, e] = [Math.floor(t), Math.ceil(e)], Math.floor([...crypto.getRandomValues(new Uint32Array(1))].shift() / 2 ** 32 * (t - e + 1) + e));
var Vt = (t) => {
  let e = t.length;
  for (; e--; ) {
    let r = Ut(e);
    [t[e], t[r]] = [t[r], t[e]];
  }
  return t;
};
var D = (t, e = 120) => `${t}`.trim().slice(0, e).replace(/>\s+</g, "><").replace(/</g, "&lt;").replace(/\s{2,}/g, " ").replace(/\n/g, "\\n") + (t.length > e ? " &hellip;" : "").trim();
var P = (t) => t.replace(/[A-Z]/g, (e) => `-${e.toLowerCase()}`).replace(/^-|-$/, "");
var Gt = ([t, ...e]) => `${t.toUpperCase()}${e.join("")}`;
var St = (t) => c(t, String) ? t.toLowerCase().split("-").map((e, r) => r && `${Gt(e)}` || e).join("") : t;
var G = () => `_${Vt(_t).slice(0, 8).join("")}`;
var X = (t, e = 120) => D(t, e).replace(/&lt;/g, "<");
var B = () => ((t) => `[${Y(t.getHours())}:${Y(t.getMinutes())}:${Y(t.getSeconds())}.${Y(t.getMilliseconds(), 3)}]`)(/* @__PURE__ */ new Date());
var W = (t) => t.replace(/</g, "&lt;");
function Et() {
  let t = function(i) {
    if (!i)
      return;
    let d = i.style, h = getComputedStyle(i), b = [d.visibility, h.visibility].includes("hidden"), f = [d.display, h.display].includes("none"), w = i.offsetTop < 0 || i.offsetLeft + i.offsetWidth < 0 || i.offsetLeft > document.body.offsetWidth, C = +h.opacity == 0 || +(d.opacity || 1) == 0;
    return !(w || C || f || b);
  }, e = function(i) {
    return !!x.nodes(":is(:read-write)", i.parentNode).find((d) => d === i);
  }, r = function(i) {
    return !!x.nodes(":is(:modal)", i.parentNode).find((d) => d === i);
  }, n = "n/a", o = { writable: n, modal: n, empty: true, open: n, visible: n };
  return (i) => {
    let d = i[0];
    return d ? { get writable() {
      return e(d);
    }, get modal() {
      return r(d);
    }, get open() {
      return d.open;
    }, get visible() {
      return t(d);
    }, get disabled() {
      return d.hasAttribute("readonly") || d.hasAttribute("disabled");
    }, get empty() {
      return false;
    }, get virtual() {
      return i.isVirtual;
    } } : o;
  };
}
var Zt = true;
var K = { data: /data-[\-\w.\p{L}]/ui, validURL: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i, whiteSpace: /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g, notAllowedValues: /javascript|injected|noreferrer|alert|DataURL/gi };
var Yt = (t) => {
  if (Zt && Object.keys(t.removed).length) {
    let e = Object.entries(t.removed).reduce((r, [n, o]) => [...r, `${W(n)} => ${o}`], []).join("\\000A");
    $.log(`JQL HTML creation errors: ${$.isConsole ? e : W(e)}`);
  }
};
var at = (t) => {
  let e = { rawHTML: t.outerHTML, removed: {} };
  return c(t, HTMLElement) && [...t.childNodes].forEach((r) => {
    if (r?.children?.length && at(r), r?.attributes) {
      let o = c(r, SVGElement) ? _.svg : _.html;
      [...(r ?? { attributes: [] }).attributes].forEach((i) => {
        let d = i.name.trim().toLowerCase(), h = i.value.trim().toLowerCase().replace(K.whiteSpace, ""), b = d === "href" ? !K.validURL.test(h) : K.notAllowedValues.test(h), f = d.startsWith("data") ? !K.data.test(d) : !!o[d];
        if (b || f) {
          let w = X(i.value || "none", 60);
          w += w.length === 60 ? "..." : "", e.removed[`${i.name}`] = `attribute/property (-value) not allowed, removed. Value: ${w}`, r.removeAttribute(i.name);
        }
      });
    }
    if (!j.isAllowed(r)) {
      let o = (r?.outerHTML || r?.textContent).trim(), i = X(o, 60) ?? "EMPTY";
      i += i.length === 60 ? "..." : "", e.removed[`<${r.nodeName?.toLowerCase()}>`] = `not allowed, not rendered. Value: ${i}`, r.remove();
    }
  }), Yt(e), t;
};
var A = { BeforeBegin: "beforebegin", AfterBegin: "afterbegin", BeforeEnd: "beforeend", AfterEnd: "afterend" };
var ct = document.createElement("div");
var Xt = (t) => (ct.innerHTML = t, ct.childNodes.length ? at(ct) : void 0);
var Kt = (t, e, r) => c(t, Comment) ? e.insertAdjacentHTML(r, `<!--${t.data}-->`) : e.insertAdjacentText(r, t.data);
var z = (t = [], e = document.body, r = A.BeforeEnd) => t.reduce((n, o) => {
  let i = N(o) && st(o, e, r);
  return i ? [...n, i] : n;
}, []);
var st = (t, e = document.body, r = A.BeforeEnd) => (e = e?.isJQL ? e?.[0] : e, c(t, Comment, Text) ? Kt(t, e, r) : e.insertAdjacentElement(r, t));
var R = (t) => {
  if (c(t, Text, Comment))
    return t;
  let e = t.trim(), r = e.split(/<text>|<\/text>/i);
  if (r = r.length > 1 ? r.filter((o) => o.length).shift() : void 0, e.startsWith("<!--") && e.endsWith("-->"))
    return document.createComment(t.replace(/<!--|-->$/g, ""));
  if (r || !/^<(.+)[^>]+>/m.test(e))
    return document.createTextNode(r);
  let n = Xt(t);
  return n.childNodes.length < 1 ? R(`<span data-jqlcreationerror="1">${D(t, 60)}</span>`) : n.children[0];
};
var S = (t, e) => {
  let r = t.collection.filter((n) => !dt(n));
  for (let n = 0; n < r.length; n += 1)
    e(r[n], n);
  return t;
};
var te = Et();
var wt = (t) => t && (t.textContent = "");
var ee = (t, e) => t.toLowerCase().trim() === e.trim().toLowerCase();
var Ct = (t, e) => {
  t && c(e, Object) && Object.entries(e).forEach(([r, n]) => t.setAttribute(`data-${P(r)}`, n));
};
var $t = (t) => t.startsWith("data") || _.html.find((e) => t.toLowerCase() === e);
var re = (t, e, r) => {
  r && c(e, String) && (e = { [e]: r === "-" ? "" : r });
  let n;
  e.className && (n = e.className, delete e.className), n = [...t.classList].find((i) => i.startsWith("JQLClass-") || n && i === n) || n || `JQLClass-${G().slice(1)}`, x.editCssRule(`.${n}`, e), t.classList.add(n);
};
var ne = (t, e) => {
  t && Object.entries(e).forEach(([r, n]) => {
    if (r.toLowerCase().startsWith("data"))
      return Ct(t, n);
    if (ee(r, "class"))
      return n.split(/,/).forEach((o) => t.classList.add(`${o.trim()}`));
    if (c(n, String) && $t(r))
      return t[r] = n;
  });
};
var lt = (t, e) => {
  c(e, Object) && Object.entries(e).forEach(([r, n]) => {
    let o;
    /!important/i.test(n) && (n = n.slice(0, n.indexOf("!")).trim(), o = "important"), t.style.setProperty(P(r), n, o);
  });
};
var oe = { get(t, e) {
  return t[St(e)] || t[e];
} };
var ie = { factoryExtensions: { is: (t) => te(t), length: (t) => t.collection.length, dimensions: (t) => t.first()?.getBoundingClientRect(), parent: (t) => {
  let e = x(t[0]?.parentNode);
  return e.is.empty ? t : e;
}, outerHtml: (t) => (t.first() || { outerHTML: void 0 }).outerHTML, data: (t) => ({ get all() {
  return new Proxy(t[0]?.dataset ?? {}, oe);
}, set: (e = {}) => (!t.is.empty && c(e, Object) && Object.entries(e).forEach(([r, n]) => t.setData({ [r]: n })), t), get: (e, r) => t.data.all[e] ?? r, add: (e = {}) => (!t.is.empty && c(e, Object) && Object.entries(e).forEach(([r, n]) => t.setData({ [r]: n })), t), remove: (e) => (t[0]?.removeAttribute(`data-${P(e)}`), t) }), Style: (t) => ({ get computed() {
  return t.is.empty ? {} : getComputedStyle(t[0]);
}, inline: (e) => t.style(e), inSheet: (e) => t.css(e), valueOf: (e) => t.is.empty ? void 0 : getComputedStyle(t[0])[P(e)], nwRule: (e) => t.Style.byRule({ rules: e }), byRule: ({ classes2Apply: e = [], rules: r = [] } = {}) => {
  let o = c(r, String) && !e.length ? r.split("{")[0].trim() : "";
  return r = r && c(r, String) ? [r] : r, e = e && c(e, String) ? [e] : e, (r?.length || e?.length) && (r?.length && x.editCssRules(...r), e?.forEach((i) => t.addClass(i))), o?.startsWith(".") && t.addClass(o.slice(1)), o?.startsWith("#") && !t.attr("id") && t.prop({ id: o.slice(1) }), t;
} }), HTML: (t) => ({ get: (e, r) => {
  if (t.is.empty)
    return "NO ELEMENTS IN COLLECTION";
  let n = e ? t.outerHtml : t.html();
  return r ? W(n) : n;
}, set: (e, r = false, n = false) => {
  e = e.isJQL ? e.HTML.get(1) : e;
  let o = c(e, String);
  return e = o && n ? W(e) : e, o && (e || "").trim().length && t.html(e, r), t;
}, replace: (e, r = false) => t.HTML.set(e, false, r), append: (e, r = false) => t.HTML.set(e, true, r), insert: (e, r = false) => (e = e.isJQL ? e.HTML.get() : e, t.HTML.set(e + t.HTML.get(), false, r)) }) }, instanceExtensions: { isEmpty: (t) => t.collection.length < 1, replaceClass: (t, e, ...r) => S(t, (n) => {
  n.classList.remove(e), r.forEach((o) => n.classList.add(o));
}), removeClass: (t, ...e) => S(t, (r) => r && e.forEach((n) => r.classList.remove(n))), addClass: (t, ...e) => S(t, (r) => r && e.forEach((n) => r.classList.add(n))), setData: (t, e) => S(t, (r) => Ct(r, e)), show: (t) => S(t, (e) => lt(e, { display: "revert-layer !important" })), hide: (t) => S(t, (e) => lt(e, { display: "none !important" })), empty: (t) => S(t, wt), clear: (t) => S(t, wt), closest: (t, e) => {
  let r = c(e, String) ? t[0].closest(e) : null;
  return r ? x(r) : t;
}, style: (t, e, r) => S(t, (o) => {
  r && c(e, String) && (e = { [e]: r || "none" }), lt(o, e);
}), toggleClass: (t, e) => S(t, (r) => r.classList.toggle(e)), css: (t, e, r) => S(t, (n) => re(n, e, r)), text: (t, e, r = false) => t.isEmpty() ? t : c(e, String) ? S(t, (o) => o.textContent = r ? o.textContent + e : e) : t.first().textContent, removeAttribute: (t, e) => S(t, (r) => r.removeAttribute(e)), each: (t, e) => S(t, e), remove: (t, e) => {
  let r = (o) => o.remove(), n = () => t.collection = t.collection.filter((o) => document.documentElement.contains(o));
  if (e) {
    let o = t.find$(e);
    return o.is.empty || (S(o, r), n()), t;
  }
  return S(t, r), n(), t;
}, computedStyle: (t, e) => t.first() && getComputedStyle(t.first())[e], getData: (t, e, r) => t.first() && t.first().dataset?.[e] || r, hasClass: (t, ...e) => {
  let r = t[0];
  return !r || !r.classList.length ? false : e.find((n) => r.classList.contains(n)) && true || false;
}, replace: (t, e, r) => {
  let n = t[0];
  return !e || !r || !c(r, HTMLElement) && !r.isJQL ? (console.error("JQL replace: invalid replacement value"), t) : (r.isJQL && (r = r[0]), c(r, NodeList) && (r = r[0]), n && e && (e = c(e, String) ? n.querySelectorAll(e) : e.isJQL ? e.collection : e, c(e, HTMLElement, NodeList, Array) && c(r, HTMLElement) && (c(e, HTMLElement) ? [e] : [...e]).forEach((o) => o.replaceWith(r.cloneNode(true)))), t);
}, replaceWith: (t, e) => (e = c(e, Element) ? e : e.isJQL ? e[0] : void 0, e && (t[0].replaceWith(e), t = x.virtual(e)), t), replaceMe: (t, e) => t.replaceWith(e), val: (t, e) => {
  let r = t[0];
  return !r || !c(r, HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement) ? t : e === void 0 ? r.value : (r.value = c(e, String) ? e : "", t);
}, attr: (t, e, r) => !r && c(e, String) ? e === "class" ? [...t[0]?.classList].join(" ") : t[0]?.getAttribute(e) : (c(e, String) && r && (e = { [e]: r }), c(e, Object) && !t.is.empty && ne(t[0], e), t), andThen: (t, e, r = false) => {
  e = e.isJQL ? e.collection : x.virtual(R(e)).collection;
  let [n, o, i] = r ? [0, "before", e.concat(t.collection)] : [t.collection.length - 1, "after", t.collection.concat(e)];
  return t[n][o](...e), t.collection = i, t;
}, afterMe: (t, e) => t.andThen(e), beforeMe: (t, e) => t.andThen(e, true), append: (t, ...e) => {
  if (!t.is.empty && e.length)
    for (let r of e) {
      if (c(r, String)) {
        let n = r.trim();
        r = !/^<(.+)[^>]+>$/m.test(n) ? x.text(r) : R(r), S(t, (i) => i.append(r));
      }
      if (N(r)) {
        let n = r;
        t.length > 1 && (n = r, n.removeAttribute && n.removeAttribute("id")), S(t, (o) => o.append(n));
      }
      if (r.isJQL && !r.is.empty) {
        let n = t.length > 1 ? r.duplicate().collection : r.collection;
        S(t, (o) => o.append(...n));
      }
    }
  return t;
}, prepend: (t, ...e) => {
  if (!t.isEmpty() && e)
    for (let r of e) {
      if (c(r, String)) {
        let n = !/^<.+>$/m.test(r.trim());
        S(t, (o) => o.prepend(n ? x.text(r) : R(r)));
      }
      if (N(r)) {
        let n = r;
        t.length > 1 && (n = r.cloneNode(true), n.removeAttribute && n.removeAttribute("id")), S(t, (o) => o.insertBefore(n, o.firstChild));
      }
      if (r.isJQL && !r.is.empty) {
        let n = t.length > 1 ? r.duplicate().collection : r.collection;
        S(t, (o) => o.prepend(...n));
      }
    }
  return t;
}, appendTo: (t, e) => (e.isJQL || (e = x(e)), e.append(t), t), prependTo: (t, e) => (e.isJQL || (e = x.virtual(e)), e.prepend(t), t), single: (t, e) => t.collection.length > 0 ? c(e, String) ? t.find$(e) : c(e, Number) ? x(t.collection[e]) : x(t.collection[0]) : t, toNodeList: (t) => [...t.collection].map((e) => document.importNode(e, true)), duplicate: (t, e = false, r = document.body) => {
  let n = t.toNodeList().map((i) => i.removeAttribute && i.removeAttribute("id") || i), o = x.virtual(n);
  return e ? o.toDOM(r) : o;
}, toDOM: (t, e = document.body, r = A.BeforeEnd) => (t.collection = z(t.collection, e, r), t.isVirtual && (t.isVirtual = false), t), first: (t, e = false) => {
  if (t.collection.length > 0)
    return e ? t.single() : t.collection[0];
}, first$: (t, e) => t.single(e), find: (t, e) => t.first()?.querySelectorAll(e) || [], find$: (t, e) => x(e, t), prop: (t, e, r) => {
  if (c(e, String) && !r)
    return e.startsWith("data") ? t[0]?.dataset[e.slice(e.indexOf("-") + 1)] : t[0]?.[e];
  let n = c(e, Object) ? e : { [e]: r };
  return Object.entries(n).forEach(([o, i]) => {
    if (o = o.trim(), i && !$t(o) || !i)
      return false;
    if (o.toLowerCase() === "id")
      return t[0].id = i;
    S(t, (h) => {
      if (o.startsWith("data"))
        return h.dataset[o.slice(o.indexOf("-") + 1)] = i;
      h[o] = i;
    });
  }), t;
}, on: (t, e, ...r) => (t.collection.length && r?.forEach((n) => {
  let o = Tt(t);
  x.delegate(e, o, n);
}), t), html: (t, e, r) => {
  if (e === void 0)
    return t[0]?.innerHTML;
  if (!t.isEmpty()) {
    let n = R(`<div>${e.isJQL ? e.HTML.get(true) : e}</div>`);
    if (!c(n, Comment))
      return S(t, (i) => i.innerHTML = r ? i.innerHTML + n.innerHTML : n.innerHTML);
  }
  return t;
}, htmlFor: (t, e, r = "", n = false) => {
  if (e && t.collection.length) {
    let o = t.find$(e);
    if (!o)
      return t;
    if ("{htmlValue}".trim().length < 1)
      return o.textContent = "", t;
    let i = R(`<div>${r}</div>`);
    i && o.html(i.innerHTML, n);
  }
  return t;
}, trigger: (t, e, r = Event, n = {}) => {
  if (t.collection.length) {
    let o = new r(e, { ...n, bubbles: n.bubbles ?? true });
    for (let i of t.collection)
      i.dispatchEvent(o);
  }
  return t;
} } };
var ut = ie;
var Ht = se;
function se(t) {
  let e = t.createStyle("JQLPopupCSS");
  yt.forEach((a) => e(a));
  let r, n, o, i, d = t.virtual('<div class="popup-warn">'), h = t('<div class="popupContainer">').append(t('<span class="closeHandleIcon">')).append(t('<div class="content">')), [b, f] = [t(".popupContainer > .closeHandleIcon"), t(".popupContainer > .content")], w = () => {
    if (b.hasClass("popup-active")) {
      let { x: a, y: s, width: p } = f.dimensions;
      b.style({ top: `${s - 12}px`, left: `${a + p - 12}px` });
    }
  }, C = (a, s = false) => {
    let p = s ? a.min - 100 : a.max + 10;
    h.style({ zIndex: p }), b.style({ zIndex: p + 1 });
  }, M = () => {
    o && t(".popup-warn").clear().append(t(`<div>${o}</div>`)), f.addClass("popup-warn-active");
  }, E = () => {
    r = false, u(b[0]);
  }, T = () => {
    let a = [0, ...t.nodes("*:not(.popupContainer, .closeHandleIcon)", document.body).map((s) => +getComputedStyle(s).zIndex).filter((s) => t.IS(s, Number))];
    return { max: Math.max(...a) ?? 0, min: Math.min(...a) ?? 0 };
  }, I = (a, s) => i = setTimeout(() => u(b[0]), +a * 1e3);
  return C(T(), true), t.delegate("click", ".popupContainer, .closeHandleIcon", (a) => u(a.target)), t.delegate("click", ".popupContainer .content", (a, s) => r && s.removeClass("popup-warn-active")), t.delegate("resize", w), { show: m, create: (a, s, p, L) => {
    let y = t.IS(s, Boolean) ? s : false;
    m({ content: a, modal: y, callback: y ? p : s, warnMessage: L });
  }, createTimed: (a, s, p) => m({ content: a, closeAfter: s, callback: p }), removeModal: E };
  function m({ content: a, modal: s, closeAfter: p, callback: L, warnMessage: y }) {
    return a ? (clearTimeout(i), C(T()), r = s ?? false, o = t.IS(y, String) && `${y?.trim()}`.length || y?.isJQL ? y : void 0, f.clear().append(a.isJQL ? a : t(`<div>${a}</div>`)), r && y && f.append(d.duplicate()), h.addClass("popup-active"), t.IS(L, Function) && (n = () => {
      L(), n = null;
    }), r || (t.IS(+p, Number) && I(p, n), b.addClass("popup-active"), w()), true) : console.error("Popup creation needs at least some text to show");
  }
  function u(a) {
    if (!r && !a.closest(".content")) {
      clearTimeout(i), f.clear(), t(".popup-active").removeClass("popup-active"), C(T(), true), t.IS(n, Function) && n(), o = "";
      return;
    }
    return r && M();
  }
}
var k = {};
var ae = ["load", "unload", "scroll", "focus", "blur", "DOMNodeRemovedFromDocument", "DOMNodeInsertedIntoDocument", "loadstart", "progress", "error", "abort", "load", "loadend", "pointerenter", "pointerleave", "readystatechange"];
var ce = (t) => !!ae.find((e) => e === t);
var At = () => {
  let t = (n) => k[n.type].forEach((o) => o(n)), e = (n, o) => (i) => {
    let d = i.target?.closest?.(n);
    return d && o(i, x(d));
  }, r = (n, o) => {
    k[n] || addEventListener(n, t, ce(n));
  };
  return (n, o, i, d = false) => {
    r(n, d);
    let h = o ? e(o, i) : i;
    k = k[n] ? { ...k, [n]: k[n].concat(h) } : { ...k, [n]: [h] };
  };
};
var mt = le;
function le({ styleSheet: t, createWithId: e }) {
  let { cssRuleFromText: r, checkAtOrAmpersandRules: n, toDashedNotation: o, IS: i, shortenRule: d, consider: h, tryAndCatch: b, ruleExists: f, checkParams: w, atMedia2String: C, sheet: M, compareSelectors: E } = ue({ styleSheet: t, createWithId: e }), T = (s, p) => {
    if (s && p.removeProperties) {
      b(() => Object.keys(p.removeProperties).forEach((L) => {
        s.style.removeProperty(L);
      }), "StylingFactory instance (remove property/properties) failed");
      return;
    }
    Object.entries(p).forEach(([L, y]) => {
      L = o(L.trim()), y = y.trim();
      let l;
      if (/!important/.test(y) && (y = y.slice(0, y.indexOf("!important")).trim(), l = "important"), !CSS.supports(L, y))
        return console.error(`StylingFactory instance error: '${L}' with value '${y}' not supported (yet)`);
      b(() => s.style.setProperty(L, y, l), "StylingFactory instance (setRule4Selector) failed");
    });
  }, I = (s, p, L = M) => {
    if (!i(s, String) || !s.trim().length || /[;,]$/g.test(s.trim()))
      return console.error(`StylingFactory instance (setRules): [${s || "[no selector given]"}] is not a valid selector`);
    let y = f(s, true), l = y || L.cssRules[L.insertRule(`${s} {}`, L.cssRules.length || 0)];
    if (p.removeRule) {
      if (!y)
        return console.error(`Remove rule: ${s} does not exist`);
      let g = [...M.rules].findIndex((v) => E(v.selectorText || "", s));
      return h(() => M.deleteRule(g));
    }
    return h(() => T(l, p), s, y);
  }, m = (s) => {
    let p = s.trim().split(/{/, 2), L = p.shift().trim();
    if (!i(L, String) || !L.trim())
      return console.error(`StylingFactory instance (doParse): no (valid) selector could be extracted from rule ${d(s)}`);
    let y = r(p.shift());
    return b(() => I(L, y), "StylingFactory instance (setRules) failed");
  }, u = (s) => {
    let p = n(s);
    return p.done ? p.existing : m(s);
  }, a = (s, p) => s.trim().startsWith("@media") ? u(C(s, p)) : I(s, p);
  return (s, p = {}) => w(s, p) && (Object.keys(p).length ? a(s, p) : u(s));
}
function ue({ styleSheet: t, createWithId: e }) {
  let r = "Note: The rule or some of its properties may not be supported by your browser (yet)", n = (l) => l.replace(/([*\[\]()-+{}.$?\\])/g, "\\$1");
  t = e ? ((l) => document.querySelector(`#${l}`)?.sheet ?? document.head.insertAdjacentElement("beforeend", Object.assign(document.createElement("style"), { id: l, type: "text/css" })).sheet)(e) : t;
  let i = (l, ...g) => {
    let v = g.length && Array.isArray(g.slice(-1)) ? g.pop().join("") : "";
    return new RegExp((g.length && l.raw.reduce((H, Z, Nt) => H.concat(g[Nt - 1] || "").concat(Z), "") || l.raw.join("")).split(`
`).map((H) => H.replace(/\s|\/\/.*$/g, "").trim().replace(/(@s!)/g, " ")).join(""), v);
  }, d = (l, g) => [...t.rules].find((v) => g ? I(v.selectorText || "", l) : i`${n(l)}${[..."gim"]}`.test(v.cssText)), h = (l) => /^(@import|@charset|@font-face)|&.+{.+?}/i.test(l.replace(/\n/g, "")) ? { existing: s(l, 0), done: true } : w.test(l) ? { ok: s(l, t.cssRules.length), done: true } : { ok: false, done: false }, b = (l, ...g) => !!g.find((v) => f(l, v)), f = (l, ...g) => {
    if (g.length > 1)
      return b(l, ...g);
    g = g.shift();
    let v = "Invalid parameter(s)", H = l === 0 ? Number : l === "" ? String : l ? Object.getPrototypeOf(l)?.constructor : { name: v };
    return g ? g === H?.__proto__ || g === H : H?.name ?? v;
  }, w = i`@keyframes | @font-feature-values | @font-palette-values
    | @layer | @namespace | @page | @counter-style | @container | @media ${["i"]}`, C = (l) => l.reduce((g, v) => {
    let [H, Z] = [v.slice(0, v.indexOf(":")).trim(), v.slice(v.indexOf(":") + 1).trim().replace(/;$|;.+(?=\/*).+\/$/, "")];
    return H && Z ? { ...g, [H]: Z } : g;
  }, {}), M = (l) => l.replace(/\/\*.+?\*\//gm, "").replace(/[}{\r\n]/g, "").split(";").map((g) => g.trim()).join(`;
`).split(`
`), E = (l) => C(M(l)), T = (l) => l.replace(/[A-Z]/g, (g) => `-${g.toLowerCase()}`).replace(/[^--]^-|-$/, ""), I = (l, g) => l?.replace("::", ":") === g?.replace("::", ":"), m = (l, g) => l && f(l, String) && l.trim().length && f(g, Object) || (console.error("StylingFactory instance called with invalid parameters"), false), u = (l) => {
    let g = (l || "NO RULE").trim().slice(0, 50).replace(/\n/g, "\\n").replace(/\s{2,}/g, " ");
    return l.length > g.length ? `${g.trim()}...truncated` : g;
  }, a = (l, g) => {
    try {
      return l();
    } catch (v) {
      console.error(`${g || "an error occured"}: ${v.message}`);
    }
  }, s = (l) => {
    l = l.trim();
    let g = !!d(l.slice(0, l.indexOf("{")));
    try {
      return t.insertRule(`${l}`, t.cssRules.length), g;
    } catch (v) {
      return console.error(`StylingFactory instance (tryParse) ${v.name} Error:
${v.message}
Rule: ${u(l)}
${r}`), g;
    }
  }, p = (l, g, v) => {
    try {
      return l(), v;
    } catch (H) {
      return console.error(`StylingFactory instance (tryAddOrModify) ${H.name} Error:
${H.message}
Rule: ${u(g)}
${r}`), v;
    }
  }, L = (l) => Object.entries(l).map(([g, v]) => `${g}: ${v.trim()}`).join(`;
`);
  return { sheet: t, tryAndCatch: a, cssRuleFromText: E, checkAtOrAmpersandRules: h, ruleExists: d, atMedia2String: (l, g) => `${l.trim()} ${Object.entries(g).map(([v, H]) => `${v}: { ${L(H)}`)}`, compareSelectors: I, toDashedNotation: T, checkParams: m, tryParse: s, consider: p, IS: f, shortenRule: u };
}
var gt = ut.instanceExtensions;
var Ft = ut.factoryExtensions;
var dt = (t) => c(t, Comment, Text);
var N = (t) => c(t, Text, HTMLElement, Comment);
var de = (t) => c(t, Comment);
var ft = (t) => c(t, String) && /^<|>$/.test(`${t}`.trim());
var Rt = (t) => c(t, Array) && !t?.find((e) => !ft(e));
var ht = (t) => c(t, Array) && !t?.find((e) => !N(e));
var Mt = (t) => t?.filter((e) => e).reduce((e, r) => e.concat(de(r) ? `<!--${r.data}-->` : dt(r) ? r.textContent : r.outerHTML), "");
var It = (t) => t ? c(t, NodeList) ? [...t] : N(t) ? [t] : ht(t) ? t : t.isJQL ? t.collection : void 0 : [];
var Dt = (t, e, r) => {
  let n = e !== document.body && c(t, String) && t.toLowerCase() !== "body" ? e : document, o;
  try {
    r.collection = [...n.querySelectorAll(t)];
  } catch {
    o = `Invalid CSS querySelector. [${c(t, String) ? t : "Nothing valid given!"}]`;
  }
  return o ?? `CSS querySelector "${t}", output ${r.collection.length} element(s)`;
};
var Tt = (t) => {
  let e = t.data.get("hid") || `HID${G()}`;
  return t.data.add({ hid: e }), `[data-hid="${e}"]`;
};
var q = (t) => {
  let e = (i) => (...d) => c(i, Function) && i(q(t), ...d), r = (i) => (...d) => c(i, Function) ? { tmpKey: i(q(t), ...d) } : { tmpKey: void 0 }, n = (i, d) => c(d, Symbol) ? () => i : c(+d, Number) ? i.collection?.[d] : d in Ft ? r(Ft[d])().tmpKey : d in gt ? e(gt[d]) : i[d], o = { get: (i, d) => n(i, d) };
  return new Proxy(t, o);
};
var pt = mt({ createWithId: "JQLStylesheet" });
var me = (t, e) => gt[t] = (r, ...n) => e(r, ...n);
var pe;
var jt = (t) => {
  let e = ge(t);
  return Object.entries(Object.getOwnPropertyDescriptors(e)).forEach(([r, n]) => {
    Object.defineProperty(t, r, n);
  }), pe = { ...e }, t;
};
function ge(t) {
  let e = { activePopup: void 0 }, r = document.createElement("br"), n = (...m) => m.forEach((u) => pt(u)), o = (m, u) => pt(m, u), i = (m, u, a) => {
    u = u?.isJQL ? u?.[0] : u, a = a && Object.values(A).find((p) => a === p) ? a : void 0;
    let s = t(m, r);
    return u && !c(u, HTMLBRElement) && s.collection.forEach((p) => a ? u.insertAdjacentElement(a, p) : u.append(p)), s;
  }, d = At(), h = (m, u, ...a) => (c(u, Function) && (a.push(u), u = void 0), a.forEach((s) => d(m, u, s))), b = Object.entries(j.tagsRaw).reduce(T, {}), f = (...m) => {
    if (m.length === 1) {
      let u = String(m.shift().trim());
      m = u.startsWith("!") ? [u.slice(1, -1)] : u.split(",").map((a) => a.trim());
    }
    m.map((u) => u.startsWith("!") ? u.slice(1, -1) : u).forEach((u) => pt(u, { removeRule: 1 }));
  }, w = Object.entries(j.tagsRaw).filter(([, m]) => m).map(([m]) => m).sort((m, u) => m.localeCompare(u));
  return I(b, ((m) => ({ debugLog: $, log: (...a) => F("fromStatic", ...a), insertPositions: A, get at() {
    return A;
  }, editCssRules: n, editCssRule: o, setStyle: o, delegate: h, virtual: i, get fn() {
    return me;
  }, get allowTag() {
    return j.allowTag;
  }, get prohibitTag() {
    return j.prohibitTag;
  }, get lenient() {
    return j.allowUnknownHtmlTags;
  }, get IS() {
    return c;
  }, popup: () => m.Popup, get Popup() {
    return m.activePopup || (m.activePopup = Ht(m)), m.activePopup;
  }, createStyle: (a) => mt({ createWithId: a || `jql${G()}` }), removeCssRule: f, removeCssRules: f, text: (a, s = false) => s ? document.createComment(a) : document.createTextNode(a), comment: (a) => m.text(a, true), node: (a, s = document) => s.querySelector(a, s), nodes: (a, s = document) => [...s.querySelectorAll(a, s)] }))(t));
  function M({ tag: m, content: u = "", cssClass: a = "", props: s = {}, toDOM: p = false, debug: L } = {}) {
    let y;
    return s?.cssClass && (a = s.cssClass, delete s.cssClass), c(u, String) && (y = t.virtual(`<${m}>${u}</${m}>`)), (c(u, HTMLElement, Array) || u.isJQL) && (c(u, Array) || (u = [u]), y = t.virtual(`<${m}></${m}>`).append(...u)), c(s, Object) && y.prop(s), a && (a = c(a, Array) ? a : [a], y.addClass(...a)), p ? y.toDOM() : y;
  }
  function E(m) {
    function u(a) {
      return a.toUpperCase() === a ? t.virtual(`<${a}></${a}>`) : (s, p = {}) => M(!s.isJQL && c(s, Object) ? { tag: a, ...s, ...p } : { tag: a, props: p, content: s });
    }
    return { get() {
      return u(m);
    } };
  }
  function T(m, [u, a]) {
    if (!a)
      return m;
    let s = u.toUpperCase();
    return Object.defineProperty(m, u, E(u)), Object.defineProperty(m, s, E(s)), m;
  }
  function I(...m) {
    let u = {};
    for (let a of m) {
      let s = Object.getOwnPropertyDescriptors(a);
      Object.entries(s).forEach(([p, L]) => Object.defineProperty(u, p, L));
    }
    return u;
  }
}
var x = jt(fe());
function fe() {
  return function(r, n, o = A.BeforeEnd) {
    let i = c(n, HTMLBRElement);
    n = i && document.body || (n && n?.isJQL ? n[0] : n) || document.body, o = o && Object.values(A).find((E) => o === E) ? o : void 0;
    let d = ft(r), h = !d && Rt(r), b = h || d, f = { collection: It(r) ?? [], isVirtual: i, isJQL: true }, w = ht(f.collection);
    location.host.startsWith("dev") && (f.params = { virtual: f.isVirtual, jql: f.isJQL, isRawHtml: d, isRawHtmlArray: h, isRawElemCollection: w });
    let C = `input =&gt; ${h ? `"${D(r.join(", "), 70)}"` : !b && w ? `element collection [${D(f.collection.map((E) => `${c(E, Comment, Text) ? "Comment|Text @" : ""} ${E.outerHTML || E.textContent}`).join(", "), 70)}]` : `"${D(r, 70)}"`}`;
    if (f.collection.length && w)
      return Q(C), i || f.collection.forEach((E) => {
        n.contains(E) || z([E], n, o);
      }), q(f);
    if (b) {
      if ([r].flat().forEach((E) => f.collection.push(R(E))), f.collection.length > 0) {
        let E = f.collection.filter((T) => T?.dataset?.jqlcreationerror);
        f.collection = f.collection.filter((T) => !T?.dataset?.jqlcreationerror), Q(`${C}`), Q(`*Created ${f.isVirtual ? "VIRTUAL " : ""}[${D(Mt(f.collection) || "sanitized: no elements remaining", 70)}]`), E.length && console.error(`JQL: illegal html, not rendered: "${E.reduce((T, I) => T.concat(`${I.textContent}
`), "").trim()}"`), f.isVirtual || z(f.collection, n, o);
      }
      return q(f);
    }
    let M = Dt(r, n, f);
    return Q(`input => ${M}`), q(f);
  };
}

// node_modules/protoxt/index.js
var getValidatedTargets = (targets) => ({
  targets: [].concat(targets).map((obj) => obj && obj.prototype),
  get invalid() {
    return this.targets.find((v) => v === null || v === void 0 || v.prototype && Object.getPrototypeOf(v.prototype || 0).constructor !== Object);
  }
});
var isArrow = (f) => !`${f}`.trim().startsWith(`function`);
var length = addSimple([Function.prototype], hasArgs);
var noCando = (targets, fn) => {
  const error = targets.invalid || targets.invalid === null ? `ProtoXT: (one of) the target(s) is not valid.` : !(fn instanceof Function) ? `ProtoXT: [fn] *must* be a Function instance.` : false;
  error && console.error(error);
  return !!error;
};
function add(targetOrTargets, fn, { outerSyntax = false, symbolName = fn?.name, asProperty = false } = {}) {
  const targetsChecked = getValidatedTargets([targetOrTargets].flat());
  return noCando(targetsChecked, fn) ? false : fn[length] ? outerSyntax || asProperty ? addProperty(targetsChecked.targets, fn, { symbolName, asProperty }) : addWithParams(targetsChecked.targets, fn, { symbolName }) : addSimple(targetsChecked.targets, fn, { symbolName });
}
function addProperty(targetOrTargets, f, { symbolName = f?.name, asProperty = false } = {}) {
  const s = Symbol(symbolName);
  targetOrTargets.forEach((target) => {
    if (asProperty) {
      Object.defineProperty(target, s, {
        configurable: true,
        get: isArrow(f) ? function(...args) {
          return f(this, ...args);
        } : f
      });
      return;
    }
    target[s] = isArrow(f) ? function(...args) {
      return f(this, ...args);
    } : f;
    target[s].configurable = true;
  });
  return s;
}
function addWithParams(targetOrTargets, f, { symbolName = f?.name } = {}) {
  const s = Symbol(symbolName);
  return {
    intermediate: function(...args) {
      targetOrTargets.forEach((target) => Object.defineProperty(target, s, {
        configurable: true,
        get: function() {
          return isArrow(f) ? f(this, ...args) : f.apply(this, args);
        }
      }));
      return s;
    }
  }.intermediate;
}
function addSimple(targetOrTargets, f, { symbolName = f?.name } = {}) {
  const s = Symbol(symbolName);
  targetOrTargets.forEach((target) => Object.defineProperty(target, s, {
    configurable: true,
    get: isArrow(f) ? function() {
      return f(this);
    } : f
  }));
  return s;
}
function hasArgs() {
  const checkArgs = (fn) => {
    const matched = String(fn).replace(RegExp(`\\s+|function|${fn.name}`, `g`), ``).match(/^\((?<multi>([^\)]+?))\)|(?<single>[a-z_,=]+?)?=>|{/).groups;
    return matched.multi || matched.single;
  };
  return this.length || checkArgs(this);
}

// node_modules/datefiddler/datefiddler.js
var datefiddler_default = dateFiddleFactory;
function dateFiddleFactory(extensions) {
  const units = {
    year: `FullYear`,
    month: `Month`,
    date: `Date`,
    day: `Date`,
    hour: `Hours`,
    minute: `Minutes`,
    second: `Seconds`,
    millisecond: `Milliseconds`
  };
  return function(date = /* @__PURE__ */ new Date(), formatter = (d) => d) {
    return instatiate(date, !(formatter instanceof Function) ? (d) => d : formatter);
  };
  function instatiate(thisDate, formatter) {
    let _date = thisDate;
    let _initial = new Date(thisDate);
    let instance = {
      toString() {
        return instance.value.toString();
      },
      reset() {
        return instance.set(_initial);
      },
      update2Current() {
        return instance.set(new Date(_date), true);
      },
      set date(d) {
        _date = new Date(d);
      },
      set initial(d) {
        _initial = new Date(d);
      },
      get date() {
        return _date;
      },
      get initial() {
        return _initial;
      },
      get value() {
        return formatter(instance.date);
      },
      get ISO() {
        return instance.date.toISOString();
      },
      clone(nwFormatter) {
        return instatiate(new Date(_date), nwFormatter || formatter);
      },
      set: function(nwValue, all = false) {
        instance.date = _date = new Date(nwValue);
        instance.initial = _initial = all ? new Date(_date) : _initial;
        return instance;
      },
      add(...things2AddOrSubtract) {
        const allInOne = things2AddOrSubtract.length === 1 && things2AddOrSubtract.shift()?.split(/,/);
        if (allInOne && allInOne.length) {
          things2AddOrSubtract = allInOne.map((v) => v.trim());
        }
        if (things2AddOrSubtract.length) {
          things2AddOrSubtract.map(function(a) {
            return a.toLowerCase().split(/\s/);
          }).forEach(
            function([n, term]) {
              const unit = units[term?.replace(/s$/i, ``)];
              if (+n && unit) {
                _date[`set${unit}`](_date[`get${unit}`]() + +n);
              }
            }
          );
        }
        return instance;
      }
    };
    instance.set(thisDate);
    if (extensions) {
      Object.entries(extensions(instance)).forEach(([ext, fn]) => instance[ext] = fn);
    }
    return Object.freeze(instance);
  }
}

// node_modules/intl-dateformatter/index.js
var intl_dateformatter_default = DateFormatFactory();
function DateFormatFactory() {
  const [digits, numeric, long, short] = [`2-digit`, `numeric`, `long`, `short`];
  const theOptions = {
    fixed: {
      MM: { month: long },
      M: { month: short },
      m: { month: numeric },
      mm: { month: digits },
      yyyy: { year: numeric },
      yy: { year: digits },
      WD: { weekday: long },
      wd: { weekday: short },
      d: { day: numeric },
      dd: { day: digits },
      h: { hour: numeric },
      hh: { hour: digits },
      mi: { minute: numeric },
      mmi: { minute: digits },
      s: { second: numeric },
      ss: { second: digits },
      ms: { fractionalSecondDigits: 3 },
      tz: { timeZoneName: `shortOffset` },
      dl: { locale: `default` },
      h12: { hour12: true },
      yn: { yearName: `` },
      ry: { relatedYear: true },
      msp: { fractionalSecond: true }
    },
    dynamic: {
      tzn: (v) => ({ timeZoneName: v.slice(4) }),
      hrc: (v) => ({ hourCycle: `h${v.slice(4)}` }),
      ds: (v) => ({ dateStyle: v.slice(3) }),
      ts: (v) => ({ timeStyle: v.slice(3) }),
      tz: (v) => ({ timeZone: v.slice(3) }),
      e: (v) => ({ era: v.slice(2) }),
      l: (v) => ({ locale: v.slice(2) })
    }
  };
  const dtfOptions = {
    ...theOptions,
    retrieveDyn(fromValue) {
      const key = fromValue?.slice(0, fromValue.indexOf(`:`));
      return theOptions.dynamic[key] && theOptions.dynamic[key](fromValue);
    },
    get re() {
      return new RegExp(`\\b(${Object.keys(theOptions.fixed).join(`|`)})\\b`, `g`);
    }
  };
  const extractFromTemplate = (rawTemplateString = `dtf`, plainTextIndex = 0) => {
    let formatStr = ` ${rawTemplateString.replace(/(?<=\{)(.+?)(?=})/g, (_2) => `[${plainTextIndex++}]`).replace(/[{}]/g, ``).trim()} `;
    const texts = rawTemplateString.match(/(?<=\{)(.+?)(?=})/g) || [];
    return {
      get texts() {
        return texts;
      },
      formatString(v) {
        formatStr = v;
      },
      set formatStr(v) {
        formatStr = v;
      },
      get formatStr() {
        return formatStr;
      },
      get units() {
        return formatStr.match(dtfOptions.re) || [];
      },
      finalize(dtf = ``, h12 = ``, era = ``, yn = ``) {
        return formatStr.replace(/~(\d+?)/g, `$1`).replace(/dtf/, dtf).replace(/era/, era).replace(/dp\b/, h12).replace(/yn\b/, yn).replace(/\[(\d+?)]/g, (_2, d) => texts[d].trim()).trim();
      }
    };
  };
  const unSpacify = (str) => str.replace(/\s+/g, ``);
  const getOpts = (...opts) => opts?.reduce(
    (acc, optValue) => ({ ...acc, ...dtfOptions.retrieveDyn(optValue) || dtfOptions.fixed[optValue] }),
    dtfOptions.fixed.dl
  );
  const dtNoParts = (date, xTemplate, moreOptions) => {
    const opts = getOpts(...unSpacify(moreOptions).split(`,`));
    const formatted = Intl.DateTimeFormat(opts.locale, opts).format(date);
    return xTemplate.finalize(formatted);
  };
  const dtFormatted = (date, xTemplate, moreOptions) => {
    const optsCollected = getOpts(...xTemplate.units.concat(unSpacify(moreOptions).split(`,`)).flat());
    const opts = { ...dtfOptions.fixed };
    const checkNumeric = (type, value) => optsCollected[type] === `numeric` && value.startsWith(`0`) ? value.slice(1) : value;
    const dtf = Intl.DateTimeFormat(optsCollected.locale, optsCollected).formatToParts(date).reduce((parts, v) => v.type === `literal` ? parts : { ...parts, [v.type]: checkNumeric(v.type, v.value) }, {});
    opts.ms = optsCollected.fractionalSecondDigits ? opts.msp : opts.ms;
    opts.yyyy = dtf.relatedYear ? opts.ry : opts.yyyy;
    xTemplate.formatStr = xTemplate.formatStr.replace(dtfOptions.re, (dtUnit) => dtf[Object.keys(opts[dtUnit]).shift()] || dtUnit);
    return xTemplate.finalize(...[, dtf.dayPeriod, dtf.era, dtf.yearName]);
  };
  return (date, template, moreOptions = `l:default`) => /ds:|ts:/.test(moreOptions) ? dtNoParts(...[date, extractFromTemplate(void 0), moreOptions]) : dtFormatted(...[date, extractFromTemplate(template || void 0), moreOptions]);
}

// node_modules/jsregexphelper/RegexpCreator.js
var RegexpCreator_default = (regexStr, ...args) => {
  const flags = args.length && Array.isArray(args.slice(-1)) ? args.pop().join(``) : ``;
  return new RegExp(
    (args.length && regexStr.raw.reduce((a, v, i) => a.concat(args[i - 1] || ``).concat(v), ``) || regexStr.raw.join(``)).split(`
`).map((line) => line.replace(/\s|\/\/.*$/g, ``).trim().replace(/(@s!)/g, ` `)).join(``),
    flags
  );
};

// index.js
var xDate = datefiddler_default(dateFiddlerExtentions);
var dtDiffCalc = dateDiffFactory();
var IS = x.IS;
setDefaultStyling();
fixSBLinks2TopProblem();
function fixSBLinks2TopProblem() {
  console.info(`\u2714 Stackblitz rewrites links to _top. The 'stackblitzhelpers' module fixed it.`);
  document.addEventListener(`click`, (evt) => {
    if (evt.target.href) {
      const ref = evt.target;
      if (ref.dataset.top || ref.classList.contains(`internalLink`) || ref.target === `_top`) {
        return top.location.href = ref.href;
      }
    }
    return true;
  });
}
function logFactory(formatJSON = true) {
  const logContainer = x(`<ul id="log2screen"/>`);
  const toJSON = (content) => tryJSON(content, formatJSON);
  const createItem = (t) => x(`${t}`.startsWith(`!!`) ? `<li class="head">` : `<li>`);
  const logPosition = { top: logContainer.prepend, bottom: logContainer.append };
  const cleanContent = (content) => !x.IS(content, String, Number) ? toJSON(content) : `${content}`;
  const writeLogEntry = (content) => createItem(content).append(x(`<div>${content?.replace(/^!!/, ``)}</div>`));
  const logItem = (pos = `bottom`) => (content) => logPosition[pos](writeLogEntry(cleanContent(content)));
  return {
    log: (...txt) => txt.forEach(logItem()),
    logTop: (...txt) => txt.forEach(logItem(`top`))
  };
}
function tryJSON(content, formatted) {
  try {
    return formatted ? `<pre>${JSON.stringify(content, null, 2)}</pre>` : JSON.stringify(content);
  } catch (err) {
    return `Some [Object object] can not be converted to JSON`;
  }
}
function dateFiddlerExtentions(instance) {
  const add2 = (toAdd) => instance.add(toAdd);
  return {
    nextWeek: (_2) => add2(`7 days`),
    previousWeek: (_2) => add2("-7 days"),
    addWeeks: (n = 1) => add2(`${n * 7} days`),
    nextYear: (_2) => add2("1 year"),
    previousYear: (_2) => add2("-1 year"),
    addYears: (n = 1) => add2(`${n} years`),
    nextMonth: (_2) => add2("1 month"),
    previousMonth: (_2) => add2("-1 month"),
    addMOnths: (n = 1) => add2(`${n} months`),
    tomorrow: (_2) => add2("1 day"),
    yesterday: (_2) => add2("-1 day"),
    addDays: (n = 1) => add2(`${n} days`)
  };
}
function dateDiffFactory() {
  const checkParams = (start, end) => {
    if (!end && !start || (!IS(start, Date) || !IS(end, Date))) {
      const [message, full, clean] = Array(3).fill(`please provide a (valid) start and end Date!`);
      return { error: true, message, full, clean };
    }
    if (!end) {
      const [message, full, clean] = Array(3).fill(`please provide a (valid) end Date!`);
      return { error: true, message, full, clean };
    }
    if (!start) {
      const [message, full, clean] = Array(3).fill(`please provide a start Date!`);
      return { error: true, message, full, clean };
    }
    return { error: false };
  };
  const stringify = stringifyComposed();
  return function getDifference({ start, end } = {}) {
    const checks = checkParams(start, end);
    if (checks.error) {
      return checks;
    }
    const date1 = new Date(start);
    const date2 = new Date(end);
    const differenceMs = Math.abs(date2 - date1);
    const differenceDate = new Date(differenceMs);
    const years = differenceDate.getUTCFullYear() - 1970;
    const months = differenceDate.getUTCMonth();
    const days = differenceDate.getUTCDate() - 1;
    const seconds = Math.floor(differenceMs / 1e3 % 3600 % 60);
    const minutes = Math.floor(differenceMs / 6e4 % 60);
    const hours = Math.floor(differenceMs / 36e5 % 24);
    const milliseconds = Math.floor(differenceMs % 1e3);
    const diffs = { years, months, days, hours, minutes, seconds, milliseconds };
    diffs.full = stringify({ values: diffs, full: true });
    diffs.clean = stringify({ values: diffs });
    return diffs;
  };
  function stringifyComposed() {
    const pipe = (...functions) => (initial) => functions.reduce((param, func) => func(param), initial);
    const singleOrMultiple = (numberOf, term) => numberOf === 1 ? term.slice(0, -1) : term;
    const filterRelevant = ({ values, full }) => [Object.entries(values).filter(([key]) => /^(years|month|days|hours|minutes|seconds)/i.test(key)), full];
    const aggregateDiffs = ([diffs, full]) => full ? diffs : diffs.filter(([, value]) => full ? +value : value > 0);
    const stringifyDiffs = (diffsFiltered) => diffsFiltered.reduce((acc, [key, value]) => [...acc, `${value} ${singleOrMultiple(value, key)}`], []);
    const diffs2SingleString = (diffStrings) => diffStrings.length < 1 ? `Dates are equal` : `${diffStrings.slice(0, -1).join(`, `)}${diffStrings.length > 1 ? ` and ` : ``}${diffStrings.slice(-1).shift()}`;
    return pipe(filterRelevant, aggregateDiffs, stringifyDiffs, diffs2SingleString);
  }
}
function setDefaultStyling() {
  x.editCssRules(...[
    `body { 
      font: normal 14px/17px  system-ui, sans-serif;
      margin: 1rem;
     }`,
    `code {
      color: green;
      background-color: #eee;
      padding: 2px;
      font-family: monospace;
    }`,
    `code.codeblock {
      display: block;
      padding: 6px;
      border: 1px solid #999;
      margin: 0.5rem 0; 
      background-color: #eee;
      white-space: pre-wrap;
    }`,
    `h3 {marginTop: 1.5rem;}`,
    `.thickBorder {
      border: 5px solid green;
      borderWidth: 5px;
      padding: 0.5rem;
      display: inline-block; 
    }`,
    `a.ExternalLink {
      text-decoration: none;
      color: rgb(0, 0, 238);
      background-color: #EEE;
      padding: 3px;
      font-weight: bold;
    }`,
    `.cmmt {
      color: #888;
    }`,
    `.hidden {display: none;}`,
    `.attention {color: red; font-size: 1.2em; font-weight: bold;}`,
    `#log2screen li { 
      listStyle: '\\2713'; 
      paddingLeft: 6px; 
      margin: 0.5rem 0 0 -1.2rem; 
      font-family: monospace 
    }`,
    `#log2screen li.head {
      list-style-type: none;
      font-weight: bold;
      margin-top: 0.8rem;
      margin-bottom: -0.2rem;
      font-family: revert;
    }`,
    `.err {fontStyle: italic; color: red; }`,
    `a {text-decoration:none; font-weight:bold;}`,
    `a:hover {text-decoration: underline;}`,
    `a[target]:before, a.internalLink:before, a.externalLink:before {
      color: rgba(0,0,238,0.7);
      font-size: 1.1rem;
      padding-right: 2px;
      vertical-align: baseline;
     }`,
    `a[target="_blank"]:before, a.externalLink:before {
      content: '\\2197';
     }`,
    `a[data-top]:before, a.internalLink:before, a[target="_top"]:before {
      content: '\\21BA';
     }`
  ]);
}
export {
  x as $,
  dtDiffCalc,
  intl_dateformatter_default as dtFormat,
  add as extendSymbolic,
  logFactory,
  RegexpCreator_default as regexhelper,
  xDate
};